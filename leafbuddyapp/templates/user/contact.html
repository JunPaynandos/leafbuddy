{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Contact - LeafBuddy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="icon"
      href="https://img.icons8.com/ios-filled/50/23d58c/leaf.png"
      type="image/png"
    />
    <style>
      input:focus,
      textarea:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(35, 213, 140, 0.4);
      }

      iframe {
        border: 0;
        width: 100%;
        height: 450px;
      }
    </style>
  </head>
  <body class="font-sans">
    {% include 'partials/navbar.html' %}
    
    <div
      id="loading-overlay"
      class="fixed inset-0 bg-black/40 flex items-center justify-center z-[999] hidden"
    >
      <div class="w-14 h-14 border-4 border-green-400 border-t-transparent rounded-full animate-spin"></div>
    </div>

    <!-- Contact Section -->
    <section class="py-24 px-6">
      {% if messages %}
        <div id="toast-container" class="fixed top-[4.2rem] right-[36px] z-50 space-y-4">
          {% for message in messages %}
            <div
                class="toast bg-green-300 text-green-800 px-6 py-2 rounded-lg shadow-lg flex items-start gap-3 animate-slide-in"
              >
                <span>{{ message }}<span>
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <div class="max-w-4xl mx-auto text-center">
        <h2 class="text-5xl font-extrabold text-green-400 mb-6">
          Get in Touch
        </h2>
        <p class="text-lg text-gray-600 mb-12">
          Have questions, suggestions, or feedback? Weâ€™d love to hear from you!
        </p>

        <form
          action="#"
          id="contact-form"
          method="POST"
          class="grid grid-cols-1 gap-6 text-left bg-white p-8 rounded-2xl shadow-md border border-gray-200"
        >
          {% csrf_token %}
          <div>
            <label for="name" class="block text-sm font-semibold text-gray-700"
              >Full Name</label
            >
            <input
              type="text"
              name="name"
              id="name"
              required
              class="w-full mt-1 px-4 py-3 rounded-lg border border-gray-300 focus:ring-green-300"
            />
          </div>
          <div>
            <label for="email" class="block text-sm font-semibold text-gray-700"
              >Email</label
            >
            <input
              type="email"
              name="email"
              id="email"
              required
              class="w-full mt-1 px-4 py-3 rounded-lg border border-gray-300 focus:ring-green-300"
            />
          </div>
          <div>
            <label
              for="message"
              class="block text-sm font-semibold text-gray-700"
              >Message</label
            >
            <textarea
              name="message"
              id="message"
              rows="5"
              required
              class="w-full mt-1 px-4 py-3 rounded-lg border border-gray-300 focus:ring-green-300 resize-none"
            ></textarea>
          </div>
          <button
            type="submit"
            class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition duration-300 w-full"
          >
            Send Message
          </button>
        </form>
      </div>
    </section>

    <div class="mt-12">
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d4286.859756084772!2d121.18518241730969!3d13.157076657869645!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x33bc96c41ed0ca39%3A0xda50b8e0d56455db!2sMindoro%20State%20University!5e0!3m2!1sen!2sph!4v1754640120836!5m2!1sen!2sph"
        width="600"
        height="450"
        style="border: 0"
        allowfullscreen=""
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
      ></iframe>
    </div>

    {% include 'partials/footer.html' %}

    <script>
      document.getElementById("contact-form").addEventListener("submit", () => {
        document.getElementById("loading-overlay").classList.remove("hidden");
      });

      setTimeout(() => {
        document.querySelectorAll(".toast").forEach((toast) => {
          toast.classList.add("opacity-0", "transition-opacity", "duration-500");
          setTimeout(() => toast.remove(), 500);
        });
      }, 4000);
    </script>
  </body>
</html>
